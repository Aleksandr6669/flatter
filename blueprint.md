# Blueprint Проекта: Голосовой ассистент и Управление Жестами

## 1. Обзор проекта

Это приложение представляет собой кастомную домашнюю страницу, сочетающую в себе голосового ассистента и инновационную систему управления курсором с помощью жестов. Оно построено как одноэкранное приложение (Single-Page Application), где основной интерфейс включает в себя часы, дату и иконки для запуска веб-приложений в оверлейном `WebView`. Ключевые особенности — постоянно доступный голосовой ассистент и возможность управлять веб-контентом с помощью камеры.

## 2. Архитектура и дизайн

### 2.1. Единый экран и State Management

Приложение использует единый экран `WeatherClockScreen` для управления всеми элементами интерфейса. Это стало возможным благодаря внедрению `provider` для управления состоянием.

- **`WebViewProvider`**: Центральный элемент, управляющий видимостью `WebView`, текущим URL и контроллером `WebViewController`.

### 2.2. Слои интерфейса

Главный экран построен с использованием `Stack`:
1.  **Фон**
2.  **Основной контент** (часы, иконки)
3.  **Слой `WebView`**
4.  **Слой ассистента**
5.  **Слой распознавания жестов** (`GestureOverlayView`)

## 3. Управление курсором с помощью жестов

### 3.1. Введение

Реализована функция управления курсором на веб-сайтах с помощью жестов рук, что позволяет взаимодействовать с контентом без мыши или сенсорного экрана.

### 3.2. Техническая реализация

- **`WebView`**: Для отображения веб-сайтов используется `WebView`.
- **Отслеживание рук**: С помощью фронтальной камеры и пакета **`hand_landmarker`** приложение в реальном времени отслеживает 21 ключевую точку (landmarks) на кисти руки. Для обработки изображений с камеры используется вспомогательный пакет **`google_mlkit_commons`**.
- **Виртуальный курсор**: Поверх `WebView` наложен кастомный виджет-курсор. Его позиция на экране синхронизирована с положением кончика указательного пальца (`INDEX_FINGER_TIP`).
- **Распознавание жестов**:
    - **Перемещение**: Движение курсора следует за указательным пальцем.
    - **Щипок (Pinch)**: Сведение большого и указательного пальцев (`THUMB_TIP` и `INDEX_FINGER_TIP`) распознается как жест "щипка". Это изменяет внешний вид курсора и может быть использовано для клика.
    - **Захват (Grab)**: Одновременное сведение большого пальца к указательному и среднего к мизинцу интерпретируется как "захват" для перетаскивания элементов.
    - **Открытая ладонь**: Используется для отмены действий или других команд.
- **Взаимодействие с WebView**: Распознанные жесты (например, "щипок") преобразуются в команды JavaScript, которые выполняются в `WebView` для имитации кликов (`element.click()`) в текущих координатах курсора.

### 3.3. Пользовательский опыт

- Пользователь активирует камеру и видит футуристичный скелет своей кисти.
- Управляет курсором на сайте с помощью движений руки.
- Взаимодействует с элементами (нажимает кнопки, переходит по ссылкам) с помощью интуитивных жестов.

## 4. План на будущее

- **Реализовать функцию погоды**: Добавить реальное получение и отображение погоды.
- **Расширить команды ассистента**: Добавить больше команд для управления устройством, поиска информации и т.д.
- **Сохранять историю диалога**: Реализовать сохранение истории переписки с ассистентом.
